[gd_scene load_steps=11 format=3 uid="uid://bwysksq6ulekl"]

[ext_resource type="Script" path="res://survivors_game.gd" id="1_ebt1e"]
[ext_resource type="PackedScene" uid="uid://5mo22e3ci4vu" path="res://characters/Miner/player.tscn" id="2_38b16"]
[ext_resource type="FontFile" uid="uid://dql203qeyagwm" path="res://Assets/FFFFORWA.TTF" id="3_joo1q"]
[ext_resource type="Script" path="res://Assets/score_label.gd" id="4_4ryvv"]
[ext_resource type="PackedScene" uid="uid://d2itpclivav52" path="res://Collectables/oil_can.tscn" id="5_1x1ey"]
[ext_resource type="PackedScene" uid="uid://c63vlxu56qld8" path="res://characters/Miner/ui.tscn" id="8_kq6vk"]
[ext_resource type="PackedScene" uid="uid://cnc47aisa587q" path="res://Levels/lvl1/lantern.tscn" id="8_ug0sm"]
[ext_resource type="PackedScene" uid="uid://oet7fm1ib1xd" path="res://Assets/NextLevel.tscn" id="10_7xivh"]

[sub_resource type="Curve2D" id="Curve2D_0v7uw"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, -695, -496, 0, 0, 0, 0, 2511, -591, 0, 0, 0, 0, 2502, 1464, 0, 0, 0, 0, -714, 1436, 0, 0, 0, 0, -695, -496)
}
point_count = 5

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_gvaxd"]
polygon = PackedVector2Array(296.364, -412.727, 540, -254.545, 592.727, -30.9091, 369.091, -27.2727)

[node name="Game" type="Node2D"]
script = ExtResource("1_ebt1e")

[node name="ColorRect" type="ColorRect" parent="."]
z_index = -2
offset_left = -896.0
offset_top = -760.0
offset_right = 2827.0
offset_bottom = 1577.0
color = Color(0.214352, 0.199947, 0.121722, 1)
metadata/_edit_group_ = true

[node name="CanvasModulateDARKNESS" type="CanvasModulate" parent="."]
color = Color(0.158472, 0.158472, 0.158472, 1)

[node name="CanvasLayer" type="CanvasLayer" parent="."]
layer = -9

[node name="Player" parent="." instance=ExtResource("2_38b16")]
y_sort_enabled = true
position = Vector2(1019, 595)

[node name="Path2D" type="Path2D" parent="Player"]
visible = false
position = Vector2(-698.899, -680.518)
scale = Vector2(0.92031, 0.902676)
curve = SubResource("Curve2D_0v7uw")

[node name="PathFollow2D" type="PathFollow2D" parent="Player/Path2D"]
unique_name_in_owner = true
visible = false
position = Vector2(-695, -496)
rotation = -0.0296233

[node name="Timer" type="Timer" parent="."]
wait_time = 0.334
autostart = true

[node name="GameOver" type="CanvasLayer" parent="."]
unique_name_in_owner = true
layer = 5
visible = false

[node name="ColorRect" type="ColorRect" parent="GameOver"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0.644531, 0.0301183, 0, 1)

[node name="GameOverButton" type="Button" parent="GameOver"]
unique_name_in_owner = true
offset_left = 730.0
offset_top = 745.0
offset_right = 1200.0
offset_bottom = 879.0
theme_override_colors/font_color = Color(0.56665, 0.824219, 0, 1)
theme_override_colors/font_outline_color = Color(0, 0.752941, 0, 1)
theme_override_fonts/font = ExtResource("3_joo1q")
theme_override_font_sizes/font_size = 23
toggle_mode = true
button_pressed = true
action_mode = 0
text = "Start Over"

[node name="Label" type="Label" parent="GameOver"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -866.0
offset_top = -328.0
offset_right = 889.0
offset_bottom = 5.0
grow_horizontal = 2
grow_vertical = 2
theme_override_fonts/font = ExtResource("3_joo1q")
theme_override_font_sizes/font_size = 120
text = "YOUR LIGHT WENT OUT"
horizontal_alignment = 1
vertical_alignment = 1

[node name="ScoreLabel" type="Label" parent="GameOver"]
offset_left = 689.0
offset_top = 557.0
offset_right = 776.0
offset_bottom = 572.0
scale = Vector2(6.05536, 5.66043)
theme_override_fonts/font = ExtResource("3_joo1q")
theme_override_font_sizes/font_size = 10
script = ExtResource("4_4ryvv")

[node name="OilCan" parent="." instance=ExtResource("5_1x1ey")]
position = Vector2(484, 253)

[node name="CanvasLayer2" type="CanvasLayer" parent="."]

[node name="Control" parent="CanvasLayer2" instance=ExtResource("8_kq6vk")]
offset_left = 24.0
offset_top = 12.0
offset_right = 264.0
offset_bottom = 52.0
scale = Vector2(1.64695, 1.21892)

[node name="LightOccluder2D" type="LightOccluder2D" parent="."]
modulate = Color(0.0569268, 0.159853, 0.0656713, 1)
position = Vector2(1617, 309)
scale = Vector2(0.55, 0.55)
occluder = SubResource("OccluderPolygon2D_gvaxd")

[node name="NextLevel" parent="." instance=ExtResource("10_7xivh")]
position = Vector2(1009, 179)
scale = Vector2(0.603913, 0.652222)

[node name="Lantern" parent="." instance=ExtResource("8_ug0sm")]
position = Vector2(1371, 453)

[connection signal="health_depleted" from="Player" to="." method="_on_player_health_depleted"]
[connection signal="timeout" from="Timer" to="." method="_on_timer_timeout"]
[connection signal="pressed" from="GameOver/GameOverButton" to="." method="_on_button_pressed"]
